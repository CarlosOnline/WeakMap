/* (The MIT License)
 * Copyright (c) 2012 Brandon Benvie <http://bbenvie.com>
 */

void function(e,h,b){function define(c,a,b){return typeof a==='function'&&(b=a,a=nameOf(b).replace(/_$/,'')),d(c,a,{configurable:!0,writable:!0,value:b})}function nameOf(a){return typeof a!=='function'?'':'name'in a?a.name:k.call(a).match(j)[1]}'use strict';var i=Object.getOwnPropertyNames,d=Object.defineProperty,k=Function.prototype.toString,f=Object.create,g=Object.prototype.hasOwnProperty,j=/^\n?function\s?(\w*)?_?\(/;var c=function(){function createUID(){var a=Math.random().toString(36).slice(2);return a in e?createUID():e[a]=a}function storage(b){if(g.call(b,a))return b[a];if(!Object.isExtensible(b))throw new TypeError('Object must be extensible');var c=f(null);return d(b,a,{value:c}),c}function c(){var a=createUID(),b={};this.unlock=function(i){var c=storage(i);if(g.call(c,a))return c[a](b);var e=f(null,h);return d(c,a,{value:new Function('s','l',j)(b,e)}),e}}var h={value:{writable:!0,value:b}},j='return function(k){if(k===s)return l}',e=f(null),a=createUID();return define(Object,function getOwnPropertyNames(c){var b=i(c);return g.call(c,a)&&b.splice(b.indexOf(a),1),b}),define(c.prototype,function get(a){return this.unlock(a).value}),define(c.prototype,function set(a,b){this.unlock(a).value=b}),c}();var a=function(f){function validate(a){if(a==null||typeof a!=='object'&&typeof a!=='function')throw new TypeError('Invalid WeakMap key')}function wrap(b,c){var a=f.unlock(b);if(a.value)throw new TypeError('Object is already a WeakMap');a.value=c}function unwrap(b){var a=f.unlock(b).value;if(!a)throw new TypeError('WeakMap is not generic');return a}function initialize(b,a){a!==null&&typeof a==='object'&&typeof a.forEach==='function'&&a.forEach(function(c,d){c instanceof Array&&c.length===2&&set.call(b,a[d][0],a[d][1])})}function a(b){if(this===e||this==null||this===prototype)return new a(b);wrap(this,new c),initialize(this,b)}function get(a){validate(a);var c=unwrap(this).get(a);return c===h?b:c}function set(a,c){validate(a),unwrap(this).set(a,c===b?h:c)}function has(a){return validate(a),unwrap(this).get(a)!==b}function delete_(a){validate(a);var c=unwrap(this),d=c.get(a)!==b;return c.set(a,b),d}function toString(){return unwrap(this),'[object WeakMap]'}try{var d=('return '+delete_).replace('e_','\\u0065');var g=new Function('unwrap','validate',d)(unwrap,validate)}catch(a){var g=delete_}var d=(''+Object).split('Object');return[toString,get,set,has,g].forEach(function(b){define(a.prototype,b),define(b,function toString(){return d[0]+nameOf(this)+d[1]})}),a}(new c);typeof module!=='undefined'?module.exports=a:typeof exports!=='undefined'?exports.WeakMap=a:!('WeakMap'in e)&&(e.WeakMap=a)}(new Function('return this')(),{})
